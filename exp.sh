#!/bin/bash

# Function to execute a command with retries
function execute_with_retry {
    local command="$1"
    local output_file="$2"
    local max_retries=3
    local retry_count=0

    while [ $retry_count -lt $max_retries ]; do
        $command > "$output_file"  # Execute the command and write output to the specified file

        if [ $? -eq 0 ]; then
            echo "Command executed successfully. Output written to $output_file."
            break
        else
            echo "Command failed. Retrying..."
            ((retry_count++))
        fi
    done

    if [ $retry_count -eq $max_retries ]; then
        echo "Command failed after $max_retries retries. Exiting."
        exit 1
    fi
}

# Retry the below commands if they fail
echo "Starting the experiment..."

#echo "Running the baseline with 1.2"
#execute_with_retry "./orangedb_main -basePath /home/g3sehgal/vector_index_exp/openai_dbpedia -M 16 -k 100 -efConstruction 40 -efSearch 300 -nThreads 32 -minAlpha 1 -maxAlpha 1 -alphaDecay 0" "baseline_40.txt"

echo "Running the experiment with minAlpha 0.95, maxAlpha 1.0 and alphaDecay 0.02"
execute_with_retry "./orangedb_main -basePath /home/g3sehgal/vector_index_exp/openai_dbpedia -M 24 -k 100 -efConstruction 50 -efSearch 300 -nThreads 32 -minAlpha 1.1 -maxAlpha 1.1 -alphaDecay 0" "out_40_1.1.txt"

echo "Running the experiment with minAlpha 0.9, maxAlpha 1.0 and alphaDecay 0.04"
execute_with_retry "./orangedb_main -basePath /home/g3sehgal/vector_index_exp/openai_dbpedia -M 24 -k 100 -efConstruction 50 -efSearch 300 -nThreads 32 -minAlpha 1.2 -maxAlpha 1.2 -alphaDecay 0" "out_40_1.2.txt"

echo "Running the experiment with minAlpha 0.9, maxAlpha 1.2 and alphaDecay 0.06"
execute_with_retry "./orangedb_main -basePath /home/g3sehgal/vector_index_exp/openai_dbpedia -M 24 -k 100 -efConstruction 50 -efSearch 300 -nThreads 32 -minAlpha 0.95 -maxAlpha 1.1 -alphaDecay 0.02" "out_40_0.02.txt"

echo "Running the experiment with minAlpha 0.95, maxAlpha 1.2 and alphaDecay 0.08"
execute_with_retry "./orangedb_main -basePath /home/g3sehgal/vector_index_exp/openai_dbpedia -M 24 -k 100 -efConstruction 50 -efSearch 300 -nThreads 32 -minAlpha 0.95 -maxAlpha 1.1 -alphaDecay 0.04" "out_40_0.04.txt"

echo "Running the experiment with minAlpha 0.95, maxAlpha 1.2 and alphaDecay 0.1"
execute_with_retry "./orangedb_main -basePath /home/g3sehgal/vector_index_exp/openai_dbpedia -M 24 -k 100 -efConstruction 50 -efSearch 300 -nThreads 32 -minAlpha 0.95 -maxAlpha 1.1 -alphaDecay 0.08" "out_40_0.08.txt"


perf record -e cycles:ppp -- ./orangedb_main -basePath /home/g3sehgal/projects/def-ssalihog/g3sehgal/gist_50k -M 64 -k 100 -efConstruction 100 -efSearch 100 -nThreads 32 -minAlpha 1.0 -maxAlpha 1.0 -alphaDecay 0


./orangedb/build/release/bin/orangedb_main -run benchmark -basePath /localscratch/g3sehgal.41095149.0/gist_1M -k 100 -M 64 -K 100 -efConstruction 200 -efSearch 300 -nThreads 32 -minAlpha 1 -alphaDecay 0.1 -maxAlpha 1.1 -filterMinK 10 -maxNeighboursCheck 128

./orangedb/build/release/bin/orangedb_main -run generateGT -basePath /localscratch/g3sehgal.41095149.0/gist_1M -k 100 -gtPath /localscratch/g3sehgal.41095149.0/gist_1M/gt.bin -filteredMaskPath /localscratch/g3sehgal.41095149.0/gist_1M/mask.bin -selectivity 0.05


./orangedb/build/release/bin/orangedb_main -run generateGT -basePath /localscratch/g3sehgal.41104075.0/gist_1M -k 100 -gtPath /localscratch/g3sehgal.41104075.0/gist_1M/gt.bin -filteredMaskPath /localscratch/g3sehgal.41104075.0/gist_1M/mask.bin -selectivity 0.1

./orangedb/build/release/bin/orangedb_main -run benchmark -basePath /localscratch/g3sehgal.41104075.0/gist_1M -k 100 -M 64 -efConstruction 200 -efSearch 200 -nThreads 32 -minAlpha 1 -alphaDecay 0.1 -maxAlpha 1.1 -filterMinK 40 -maxNeighboursCheck 60

./build/release/bin/orangedb_main -run generateGT -basePath /home/centos/orangedb/data/gist -k 100 -numVectors 1000000 -gtPath /home/centos/orangedb/data/gist/gt.bin

./build/release/bin/orangedb_main -run benchmarkReclusteringIndex -baseVectorPath /home/centos/orangedb/data/sift10m/base.fvecs -queryVectorPath /home/centos/orangedb/data/sift10m/query.fvecs -groundTruthPath /home/centos/orangedb/data/sift10m/gt.bin -k 100 -numInserts 1 -numCentroids 40000 -numIters 30 -minCentroidSize 150 -maxCentroidSize 300 -nProbes 100 -lambda 0 -numReclusters 0 -readFromDisk 0 -storagePath /home/centos/orangedb/data/sift10m/index.bin
./build/release/bin/orangedb_main -run benchmarkReclusteringIndex -baseVectorPath /home/centos/orangedb/data/sift10m/base.fvecs -queryVectorPath /home/centos/orangedb/data/sift10m/query.fvecs -groundTruthPath /home/centos/orangedb/data/sift10m/gt.bin -k 100 -numInserts 1 -numCentroids 40000 -numIters 30 -minCentroidSize 150 -maxCentroidSize 300 -nProbes 100 -lambda 0 -numReclusters 0 -readFromDisk 0 -storagePath /home/centos/orangedb/data/sift10m/index.bin
./build/release/bin/orangedb_main -run benchmarkReclusteringIndex -baseVectorPath /home/centos/orangedb/data/sift10m/base.fvecs -queryVectorPath /home/centos/orangedb/data/sift10m/query.fvecs -groundTruthPath /home/centos/orangedb/data/sift10m/gt.bin -k 100 -numInserts 1 -numCentroids 40000 -numIters 30 -minCentroidSize 150 -maxCentroidSize 300 -nProbes 100 -lambda 0 -numReclusters 0 -readFromDisk 0 -storagePath /home/centos/orangedb/data/sift10m/index.bin

./build/release/bin/orangedb_main -run benchmarkSplitting -baseVectorPath /home/centos/orangedb/data/sift10m/base.fvecs -queryVectorPath /home/centos/orangedb/data/sift10m/query.fvecs -groundTruthPath /home/centos/orangedb/data/sift10m/gt.bin -k 100 -numInserts 10 -numCentroids 4000 -numIters 30 -minCentroidSize 150 -maxCentroidSize 300 -maxMegaClusterSize 8000 -nMegaProbes 3 -nMicroProbes 3 -lambda 0 -numReclusters 0 -readFromDisk 0 -storagePath /home/centos/orangedb/data/sift10m/incremental_index.bin

./build/release/bin/orangedb_main -run benchmarkReclusteringIndex -baseVectorPath /home/centos/orangedb/data/sift10m/base.fvecs -queryVectorPath /home/centos/orangedb/data/sift10m/query.fvecs -groundTruthPath /home/centos/orangedb/data/sift10m/gt.bin -k 100 -numInserts 20 -numVectors 1000000 -numIters 40 -megaCentroidSize 100 -miniCentroidSize 500 -newMiniCentroidSize 100 -lambda 0 -numMegaReclusterCentroids 5 -numNewMiniReclusterCentroids 100 -nMegaProbes 3 -nMiniProbes 20 -readFromDisk 0 -storagePath /home/centos/orangedb/data/sift10m/incremental_index.bin

./build/release/bin/orangedb_main -run benchmarkQuantized -baseVectorPath /home/centos/gist/base.fvecs -queryVectorPath /home/centos/gist/query.fvecs -n 1

./build/release/bin/orangedb_main -run benchmarkReclusteringIndex -baseVectorPath /home/centos/orangedb/data/sift10m/base.fvecs -queryVectorPath /home/centos/orangedb/data/sift10m/query.fvecs -groundTruthPath /home/centos/orangedb/data/sift10m/gt.bin -k 100 -numInserts 50 -numVectors 10000000 -numIters 30 -megaCentroidSize 100 -miniCentroidSize 500 -newMiniCentroidSize 100 -lambda 0 -numMegaReclusterCentroids 5 -numNewMiniReclusterCentroids 100 -nMegaProbes 3 -nMiniProbes 20 -readFromDisk 0 -storagePath /home/centos/orangedb/data/sift10m/incremental_index.bin
./build/release/bin/orangedb_main -run benchmarkClustering -baseVectorPath /home/centos/orangedb/data/gist/base.fvecs -queryVectorPath /home/centos/orangedb/data/gist/query.fvecs -groundTruthPath /home/centos/orangedb/data/gist/gt.bin -k 100 -numVectors 10000000 -nIter 30 -clusterSize 500 -lambda 0 -nProbes 20
./build/release/bin/orangedb_main -run benchmarkReclusteringAlgorithm -baseVectorPath /Users/gaurav.sehgal/work/orangedb/data/gist/base.fvecs -queryVectorPath /Users/gaurav.sehgal/work/orangedb/data/gist/query.fvecs -groundTruthPath /Users/gaurav.sehgal/work/orangedb/data/gist/gt.bin -k 100 -numInserts 10 -numVectors 100000 -numIters 10 -megaCentroidSize 50 -miniCentroidSize 250 -maxLevels 10 -fast 0 -lambda 0 -numMegaReclusterCentroids 3 -nMegaProbes 4 -nMiniProbes 40 -readFromDisk 1 -storagePath /Users/gaurav.sehgal/work/orangedb/data/gist/index.bin

./build/release/bin/orangedb_main -run benchmarkReclusteringAlgorithm -baseVectorPath /Users/gaurav.sehgal/work/orangedb/data/gist/base.fvecs -queryVectorPath /Users/gaurav.sehgal/work/orangedb/data/gist/query.fvecs -groundTruthPath /Users/gaurav.sehgal/work/orangedb/data/gist/gt.bin -k 100 -numInserts 10 -numVectors 100000 -numIters 10 -megaCentroidSize 50 -miniCentroidSize 250 -maxLevels 10 -fast 0 -lambda 0 -numMegaReclusterCentroids 3 -nMegaProbes 4 -nMiniProbes 40 -readFromDisk 1 -storagePath /Users/gaurav.sehgal/work/orangedb/data/gist/index.bin


./build/release/bin/orangedb_main -run benchmarkNavix -baseVectorPath /Users/gaurav.sehgal/work/orangedb/data/gist/base.fvecs -queryVectorPath /Users/gaurav.sehgal/work/orangedb/data/gist/query.fvecs -gtPath /Users/gaurav.sehgal/work/orangedb/data/gist/gt.bin -maskPath /Users/gaurav.sehgal/work/vector_dataset/gist/bench_data/mask_30.bin  -k 100 -M 32 -efSearch 200 -nThreads 32 -readFromDisk 0 -storagePath /Users/gaurav.sehgal/work/orangedb/data/gist/hnsw_index.bin

./build/release/bin/orangedb_main -run benchmarkAcorn -vectorPath /Users/gaurav.sehgal/work/orangedb/data/gist/base.fvecs -queryPath /Users/gaurav.sehgal/work/orangedb/data/gist/query.fvecs -gtPath /Users/gaurav.sehgal/work/orangedb/data/gist/gt.bin -maskPath /Users/gaurav.sehgal/work/vector_dataset/gist/bench_data/mask_30.bin  -k 100 -M 64 -gamma 1 -M_beta 128 -efSearch 200 -nThreads 32 -readFromDisk 0 -storagePath /Users/gaurav.sehgal/work/orangedb/data/gist/acorn_index.bin

./build/release/bin/orangedb_main -run benchmarkAcorn -vectorPath /home/centos/orangedb/data/gist/base.fvecs -queryPath /home/centos/vector_dataset/gist/bench_data/queries.fvecs -gtPath /home/centos/vector_dataset/gist/bench_data/gt.bin -maskPath /home/centos/vector_dataset/gist/bench_data/mask_30.bin  -k 100 -M 32 -gamma 10 -M_beta 64 -efSearch 300 -nThreads 32 -readFromDisk 0 -storagePath /home/centos/orangedb/data/gist/acorn_index.bin

./build/release/bin/orangedb_main -run benchmarkNavix -vectorPath /home/centos/orangedb/data/gist/base.fvecs -queryPath /home/centos/vector_dataset/gist/bench_data/queries.fvecs -gtPath /home/centos/vector_dataset/gist/bench_data/gt.bin -maskPath /home/centos/vector_dataset/gist/bench_data/mask_30.bin  -k 100 -M 32 -efSearch 120 -nThreads 32 -readFromDisk 1 -storagePath /home/centos/orangedb/data/gist/hnsw_index.bin

./build/release/bin/orangedb_main -run benchmarkIRangeGraph -vectorPath /home/centos/orangedb/data/gist/base.fvecs -queryPath /home/centos/vector_dataset/gist/bench_data/queries.fvecs -gtPath /home/centos/vector_dataset/gist/bench_data/gt.bin -maskPath /home/centos/vector_dataset/gist/bench_data/mask_30.bin -k 100 -M 32 -efSearch 120 -efConstruction 200 -nThreads 32 -readFromDisk 0 -storagePath /home/centos/orangedb/data/gist/irangegraph_index.bin -outputPath /home/centos/orangedb/data/gist/irangegraph_search.out

./build/release/bin/orangedb_main -run benchmarkFastReclustering -baseVectorPath /home/centos/vector_dataset/sift10m/base.fvecs -queryVectorPath /home/centos/vector_dataset/sift10m/query.fvecs -groundTruthPath /home/centos/vector_dataset/sift10m/gt.bin -k 100 -numInserts 10 -numVectors 10000000 -numIters 20 -megaCentroidSize 500 -miniCentroidSize 500 -iterations 20 -fast 0 -lambda 0 -nMegaProbes 4 -nMiniProbes 40 -nQueries 50 -readFromDisk 0 -storagePath /Users/gaurav.sehgal/work/orangedb/data/gist/reclustering_fast_index.bin

./build/release/bin/orangedb_main -run generateGT -basePath /home/centos/vector_dataset/sift10m -numVectors 10000000 -k 100 -gtPath /home/centos/vector_dataset/sift10m/gt.bin

./build/release/bin/orangedb_main -run benchmarkFaissClustering -baseVectorPath /home/centos/vector_dataset/wiki/base.fvecs -queryVectorPath /home/centos/vector_dataset/wiki/uncorrelated/queries.fvecs -groundTruthPath /home/centos/vector_dataset/wiki/gt.bin -k 100 -numVectors 100000000 -sampleSize 1000000 -nIter 10 -nThreads 64 -numQueries 50 -clusterSize 500 -nProbes 20 -readFromDisk 0 -storagePath /home/centos/vector_dataset/wiki/faiss_ivf_flat_index.bin

./build/release/bin/orangedb_main -run benchmarkClustering -baseVectorPath /home/centos/vector_dataset/wiki/base.fvecs -queryVectorPath /home/centos/vector_dataset/wiki/uncorrelated/queries.fvecs -groundTruthPath /home/centos/vector_dataset/wiki/gt.bin -k 100 -numVectors 100000000 -nIter 10 -clusterSize 500 -lambda 0 -nProbes 60 -numThreads 64

./build/release/bin/orangedb_main -run generateGT -dataPath /home/centos/vector_dataset/wiki/random_base.fvecs -queryPath /home/centos/vector_dataset/wiki/uncorrelated/queries.fvecs -numVectors 100000000 -k 100 -gtPath /home/centos/vector_dataset/wiki/random_gt.bin

./build/release/bin/orangedb_main -run benchmarkAcorn -dataPath /home/centos/vector_dataset/arxiv/base.fvecs -basePath /home/centos/vector_dataset/arxiv/uncorrelated -sels 1,3,5,10,20,30,40,50,75,90 -efS 100,100,100,100,100,100,100,100,100,100 -autoEf 1 -k 100 -M 64 -gamma 1 -M_beta 128 -efSearch 300 -nThreads 32 -minRecall 0.950 -maxRecall 0.955 -readFromDisk 0 -storagePath /home/centos/vector_dataset/arxiv/acorn_1_index.bin -resultPath /home/centos/vector_dataset/arxiv/results

./build/release/bin/orangedb_main -run benchmarkFastReclustering -baseVectorPath /home/centos/vector_dataset/wiki/base.fvecs -queryVectorPath /home/centos/vector_dataset/wiki/uncorrelated/queries.fvecs -groundTruthPath /home/centos/vector_dataset/wiki/gt.bin -k 100 -numInserts 15 -numVectors 100000000 -numIters 10 -megaCentroidSize 500 -miniCentroidSize 500 -numThreads 32 -iterations 20 -fast 0 -lambda 0 -nMegaProbes 4 -nMiniProbes 40 -numQueries 50 -numMegaReclusterCentroids 1 -reclusterOnScore 0 -readFromDisk 0 -storagePath /home/centos/vector_dataset/wiki/reclustering_fast_index.bin

./build/release/bin/orangedb_main -run benchmarkNavix -dataPath /home/centos/vector_dataset/wiki/base.fvecs -basePath /home/centos/vector_dataset/wiki/uncorrelated -sels 90,75,50,40,30,20,10,5,3,1 -efS 100,100,100,100,100,100,100,100,100,100 -autoEf 1 -k 100 -M 32 -efConstruction 200 -minRecall 0.950 -maxRecall 0.955 -nThreads 32 -readFromDisk 1 -storagePath  /home/centos/vector_dataset/wiki/navix_index.bin -useIp 1 -resultPath /home/centos/results/wiki/

./build/release/bin/orangedb_main -run benchmarkAcorn -dataPath /home/centos/vector_dataset/wiki/normalized_base.fvecs -basePath /home/centos/vector_dataset/wiki/uncorrelated -sels 100,90,75,50,40,30,20,10,5,3,1 -efS 100,100,100,100,100,100,100,100,100,100,100 -autoEf 1 -k 100 -M 64 -gamma 1 -M_beta 128 -efConstruction 200 -minRecall 0.950 -maxRecall 0.955 -nThreads 32 -readFromDisk 0 -storagePath  /home/centos/vector_dataset/wiki/acorn_1_index.bin -useIp 1 -resultPath /home/centos/results/wiki/

./build/release/bin/orangedb_main -run benchmarkAcorn -dataPath /home/centos/vector_dataset/wiki/base.fvecs -basePath /home/centos/vector_dataset/wiki/uncorrelated -sels 100,90,75,50,40,30,20,10,5,3,1 -efS 100,100,100,100,100,100,100,100,100,100,100 -autoEf 1 -k 100 -M 64 -gamma 1 -M_beta 128 -minRecall 0.950 -maxRecall 0.955 -nThreads 32 -readFromDisk 0 -storagePath  /home/centos/vector_dataset/wiki/acorn_1_index.bin -useIp 1 -resultPath /home/centos/results/wiki/

./build/release/bin/orangedb_main -run benchmarkAcorn -dataPath /home/centos/vector_dataset/wiki/base.fvecs -basePath /home/centos/vector_dataset/wiki/pos_correlated -sels 22.93,15.02,9.96,5.10,1.01 -efS 100,100,100,100,100 -autoEf 1 -k 100 -M 64 -gamma 1 -M_beta 128 -minRecall 0.950 -maxRecall 0.955 -nThreads 32 -readFromDisk 1 -storagePath  /home/centos/vector_dataset/wiki/acorn_1_index.bin -useIp 1 -resultPath /home/centos/results/wiki/pos/

./build/release/bin/orangedb_main -run generateFilterGT -dataPath /home/centos/vector_dataset/wiki/base.fvecs -basePath /home/centos/vector_dataset/wiki/neg_correlated -sels 22.93,15.02,9.96,5.10,1.01 -k 100
./build/release/bin/orangedb_main -run generateFilterGT -dataPath /home/centos/vector_dataset/wiki/base.fvecs -basePath /home/centos/vector_dataset/wiki/pos_correlated -sels 22.93,15.02,9.96,5.10,1.01 -k 100
./build/release/bin/orangedb_main -run generateFilterGT -dataPath /home/centos/vector_dataset/wiki/base.fvecs -basePath /home/centos/vector_dataset/wiki/uncorrelated -sels 100,90,75,50,40,30,20,10,5,3,1 -k 100

./build/release/bin/orangedb_main -run benchmarkNavix -dataPath /home/centos/vector_dataset/wiki/base.fvecs -basePath /home/centos/vector_dataset/wiki/neg_correlated -sels 22.93,15.02,9.96,5.10,1.01 -efS 100,100,100,100,100 -autoEf 1 -k 100 -M 32 -efConstruction 200 -minRecall 0.950 -maxRecall 0.955 -nThreads 32 -readFromDisk 1 -storagePath /home/centos/vector_dataset/wiki/navix_index.bin -useIp 1 -resultPath /home/centos/results/wiki/neg/
./build/release/bin/orangedb_main -run benchmarkNavix -dataPath /home/centos/vector_dataset/wiki/base.fvecs -basePath /home/centos/vector_dataset/wiki/pos_correlated -sels 22.93,15.02,9.96,5.10,1.01 -efS 100,100,100,100,100 -autoEf 1 -k 100 -M 32 -efConstruction 200 -minRecall 0.950 -maxRecall 0.955 -nThreads 32 -readFromDisk 1 -storagePath /home/centos/vector_dataset/wiki/navix_index.bin -useIp 1 -resultPath /home/centos/results/wiki/pos/
./build/release/bin/orangedb_main -run benchmarkNavix -dataPath /home/centos/vector_dataset/wiki/base.fvecs -basePath /home/centos/vector_dataset/wiki/uncorrelated -sels 100,90,75,50,40,30,20,10,5,3,1 -efS 100,100,100,100,100,100,100,100,100,100,100 -autoEf 1 -k 100 -M 32 -efConstruction 200 -minRecall 0.950 -maxRecall 0.955 -nThreads 32 -readFromDisk 1 -storagePath /home/centos/vector_dataset/wiki/navix_index.bin -useIp 1 -resultPath /home/centos/results/wiki/uncorrelated/
./build/release/bin/orangedb_main -run benchmarkNavix -dataPath /home/centos/vector_dataset/wiki/base.fvecs -basePath /home/centos/vector_dataset/wiki/uncorrelated -sels 100 -efS 100 -autoEf 1 -k 100 -M 32 -efConstruction 200 -minRecall 0.950 -maxRecall 0.955 -nThreads 32 -readFromDisk 1 -storagePath /home/centos/vector_dataset/wiki/navix_index.bin -useIp 1 -resultPath /home/centos/results/wiki/uncorrelated/
./build/release/bin/orangedb_main -run benchmarkNavix -dataPath /home/centos/vector_dataset/gist/base.fvecs -basePath /home/centos/vector_dataset/gist/bench_data -sels 100,90,75,50,40,30,20,10,5,3,1 -efS 100,90,75,50,40,30,20,10,5,3,1 -autoEf 1 -k 100 -M 32 -efConstruction 200 -minRecall 0.950 -maxRecall 0.955 -nThreads 32 -readFromDisk 1 -storagePath /home/centos/vector_dataset/gist/navix_index.bin -useIp 1 -resultPath /home/centos/results/gist/

./build/release/bin/orangedb_main -run benchmarkNavix -dataPath /home/centos/vector_dataset/tiny/base.fvecs -basePath /home/centos/vector_dataset/tiny/bench_data -sels 100,90,75,50,40,30,20,10,5,3,1 -efS 100,90,75,50,40,30,20,10,5,3,1 -autoEf 1 -k 100 -M 32 -efConstruction 200 -minRecall 0.950 -maxRecall 0.955 -nThreads 32 -readFromDisk 1 -storagePath /home/centos/vector_dataset/tiny/navix_index.bin -useIp 1 -resultPath /home/centos/results/tiny/


./build/release/bin/orangedb_main -run benchmarkAcorn -dataPath /home/centos/vector_dataset/wiki/base.fvecs -basePath /home/centos/vector_dataset/wiki/neg_correlated -sels 22.93,15.02,9.96,5.10,1.01 -efS 100,100,100,100,100 -autoEf 1 -k 100 -M 32 -gamma 10 -M_beta 64 -minRecall 0.950 -maxRecall 0.955 -nThreads 32 -readFromDisk 1 -storagePath /home/centos/vector_dataset/wiki/acorn_10_index.bin -useIp 1 -resultPath /home/centos/results/wiki/neg/
./build/release/bin/orangedb_main -run benchmarkAcorn -dataPath /home/centos/vector_dataset/wiki/base.fvecs -basePath /home/centos/vector_dataset/wiki/pos_correlated -sels 22.93,15.02,9.96,5.10,1.01 -efS 100,100,100,100,100 -autoEf 1 -k 100 -M 32 -gamma 10 -M_beta 64 -minRecall 0.950 -maxRecall 0.955 -nThreads 32 -readFromDisk 1 -storagePath /home/centos/vector_dataset/wiki/acorn_10_index.bin -useIp 1 -resultPath /home/centos/results/wiki/pos/
./build/release/bin/orangedb_main -run benchmarkAcorn -dataPath /home/centos/vector_dataset/wiki/base.fvecs -basePath /home/centos/vector_dataset/wiki/uncorrelated -sels 90,75,50,40,30,20,10,5,3,1 -efS 100,100,100,100,100,100,100,100,100,100 -autoEf 1 -k 100 -M 32 -gamma 10 -M_beta 64 -minRecall 0.950 -maxRecall 0.955 -nThreads 32 -readFromDisk 1 -storagePath /home/centos/vector_dataset/wiki/acorn_10_index.bin -useIp 1 -resultPath /home/centos/results/wiki/uncorrelated/

./build/release/bin/orangedb_main -run benchmarkAcorn -dataPath /home/centos/vector_dataset/wiki/base.fvecs -basePath /home/centos/vector_dataset/wiki/uncorrelated -sels 100 -efS 100 -autoEf 1 -k 100 -M 32 -gamma 10 -M_beta 64 -minRecall 0.950 -maxRecall 0.955 -nThreads 32 -readFromDisk 1 -storagePath /home/centos/vector_dataset/wiki/acorn_10_index.bin -useIp 1 -resultPath /home/centos/results/wiki/uncorrelated/
./build/release/bin/orangedb_main -run benchmarkAcorn -dataPath /home/centos/vector_dataset/gist/base.fvecs -basePath /home/centos/vector_dataset/gist/bench_data -sels 100,90,75,50,40,30,20,10,5,3,1 -efS 100,100,100,100,100,100,100,100,100,100,100 -autoEf 1 -k 100 -M 32 -gamma 10 -M_beta 64 -minRecall 0.950 -maxRecall 0.955 -nThreads 32 -readFromDisk 0 -storagePath /home/centos/vector_dataset/gist/acorn_10_index.bin -useIp 0 -resultPath /home/centos/results/gist/
./build/release/bin/orangedb_main -run benchmarkAcorn -dataPath /home/centos/vector_dataset/gist/base.fvecs -basePath /home/centos/vector_dataset/gist/bench_data -sels 20,10,5,3,1 -efS 100,100,100,100,100 -autoEf 1 -k 100 -M 64 -gamma 1 -M_beta 128 -minRecall 0.950 -maxRecall 0.955 -nThreads 32 -readFromDisk 0 -storagePath /home/centos/vector_dataset/gist/acorn_1_index.bin -useIp 0 -resultPath /home/centos/results/gist/

./build/release/bin/orangedb_main -run benchmarkAcorn -dataPath /home/centos/vector_dataset/tiny/base.fvecs -basePath /home/centos/vector_dataset/tiny/bench_data -sels 90,75,50,40,30,20,10,5,3,1 -efS 90,75,50,40,30,20,10,5,3,1 -autoEf 1 -k 100 -M 32 -gamma 10 -M_beta 64 -minRecall 0.950 -maxRecall 0.955 -nThreads 32 -readFromDisk 1 -storagePath /home/centos/vector_dataset/tiny/acorn_10_index.bin -useIp 0 -resultPath /home/centos/results/tiny/
./build/release/bin/orangedb_main -run benchmarkAcorn -dataPath /home/centos/vector_dataset/tiny/base.fvecs -basePath /home/centos/vector_dataset/tiny/bench_data -sels 90,75,50,40,30,20,10,5,3,1 -efS 90,75,50,40,30,20,10,5,3,1 -autoEf 1 -k 100 -M 64 -gamma 1 -M_beta 128 -minRecall 0.950 -maxRecall 0.955 -nThreads 32 -readFromDisk 1 -storagePath /home/centos/vector_dataset/tiny/acorn_1_index.bin -useIp 0 -resultPath /home/centos/results/tiny/


./build/release/bin/orangedb_main -run benchmarkAcorn -dataPath /home/centos/vector_dataset/wiki/base.fvecs -basePath /home/centos/vector_dataset/wiki/neg_correlated -sels 22.93,15.02,9.96,5.10,1.01 -efS 100,100,100,100,100 -autoEf 1 -k 100 -M 64 -gamma 1 -M_beta 128 -minRecall 0.950 -maxRecall 0.955 -nThreads 32 -readFromDisk 1 -storagePath /home/centos/vector_dataset/wiki/acorn_1_index.bin -useIp 1 -resultPath /home/centos/results/wiki/neg/
./build/release/bin/orangedb_main -run benchmarkAcorn -dataPath /home/centos/vector_dataset/wiki/base.fvecs -basePath /home/centos/vector_dataset/wiki/pos_correlated -sels 22.93,15.02,9.96,5.10,1.01 -efS 100,100,100,100,100 -autoEf 1 -k 100 -M 64 -gamma 1 -M_beta 128 -minRecall 0.950 -maxRecall 0.955 -nThreads 32 -readFromDisk 1 -storagePath /home/centos/vector_dataset/wiki/acorn_1_index.bin -useIp 1 -resultPath /home/centos/results/wiki/pos/
./build/release/bin/orangedb_main -run benchmarkAcorn -dataPath /home/centos/vector_dataset/wiki/base.fvecs -basePath /home/centos/vector_dataset/wiki/uncorrelated -sels 90,75,50,40,30,20,10,5,3,1 -efS 100,100,100,100,100,100,100,100,100,100 -autoEf 1 -k 100 -M 64 -gamma 1 -M_beta 128 -minRecall 0.950 -maxRecall 0.955 -nThreads 32 -readFromDisk 1 -storagePath /home/centos/vector_dataset/wiki/acorn_1_index.bin -useIp 1 -resultPath /home/centos/results/wiki/uncorrelated/

./build/release/bin/orangedb_main -run benchmarkAcorn -dataPath /home/centos/vector_dataset/wiki/base.fvecs -basePath /home/centos/vector_dataset/wiki/uncorrelated -sels 100 -efS 100 -autoEf 1 -k 100 -M 64 -gamma 1 -M_beta 128 -minRecall 0.950 -maxRecall 0.955 -nThreads 32 -readFromDisk 1 -storagePath /home/centos/vector_dataset/wiki/acorn_1_index.bin -useIp 1 -resultPath /home/centos/results/wiki/uncorrelated/


./build/release/bin/orangedb_main -run benchmarkAcorn -dataPath /home/centos/vector_dataset/arxiv/base.fvecs -basePath /home/centos/vector_dataset/arxiv/bench_data -sels 100,90,75,50,40,30,20,10,5,3,1 -efS 100,100,100,100,100,100,100,100,100,100,100 -autoEf 1 -k 100 -M 64 -gamma 1 -M_beta 128 -minRecall 0.950 -maxRecall 0.955 -nThreads 32 -readFromDisk 0 -storagePath /home/centos/vector_dataset/arxiv/acorn_1_index.bin -useIp 1 -resultPath /home/centos/results/arxiv/
./build/release/bin/orangedb_main -run benchmarkAcorn -dataPath /home/centos/vector_dataset/arxiv/base.fvecs -basePath /home/centos/vector_dataset/arxiv/bench_data -sels 100,90,75,50,40,30,20,10,5,3,1 -efS 100,100,100,100,100,100,100,100,100,100,100 -autoEf 1 -k 100 -M 32 -gamma 10 -M_beta 64 -minRecall 0.950 -maxRecall 0.955 -nThreads 32 -readFromDisk 1 -storagePath /home/centos/vector_dataset/arxiv/acorn_10_index.bin -useIp 1 -resultPath /home/centos/results/arxiv/
./build/release/bin/orangedb_main -run benchmarkNavix -dataPath /home/centos/vector_dataset/arxiv/base.fvecs -basePath /home/centos/vector_dataset/arxiv/bench_data -sels 100,90,75,50,40,30,20,10,5,3,1 -efS 100,100,100,100,100,100,100,100,100,100,100 -autoEf 1 -k 100 -M 32 -efConstruction 200 -minRecall 0.950 -maxRecall 0.955 -nThreads 32 -readFromDisk 1 -storagePath /home/centos/vector_dataset/arxiv/navix_index.bin -useIp 1 -resultPath /home/centos/results/arxiv/

./build/release/bin/orangedb_main -run benchmarkAcorn -dataPath /home/centos/vector_dataset/arxiv/base.fvecs -basePath /home/centos/vector_dataset/arxiv/bench_data -sels 100 -efS 100 -autoEf 1 -k 100 -M 64 -gamma 1 -M_beta 128 -minRecall 0.950 -maxRecall 0.955 -nThreads 32 -readFromDisk 1 -storagePath /home/centos/vector_dataset/arxiv/acorn_1_index.bin -useIp 1 -resultPath /home/centos/results/arxiv/
./build/release/bin/orangedb_main -run benchmarkAcorn -dataPath /home/centos/vector_dataset/arxiv/base.fvecs -basePath /home/centos/vector_dataset/arxiv/bench_data -sels 100 -efS 100 -autoEf 1 -k 100 -M 32 -gamma 10 -M_beta 64 -minRecall 0.950 -maxRecall 0.955 -nThreads 32 -readFromDisk 1 -storagePath /home/centos/vector_dataset/arxiv/acorn_10_index.bin -useIp 1 -resultPath /home/centos/results/arxiv/

./build/release/bin/orangedb_main -run benchmarkIRangeGraph -dataPath /home/centos/vector_dataset/gist/base.fvecs -basePath /home/centos/vector_dataset/gist/bench_data -sels 100,90,75,50,40,30,20,10,5,3,1 -efS 100,100,100,100,100,100,100,100,100,100,100 -autoEf 1 -k 100 -M 32 -efConstruction 200 -minRecall 0.950 -maxRecall 0.955 -nThreads 32 -readFromDisk 1 -storagePath /home/centos/vector_dataset/gist/irangegraph_index.bin -useIp 1 -resultPath /home/centos/results/gist/
./build/release/bin/orangedb_main -run benchmarkIRangeGraph -dataPath /home/centos/vector_dataset/tiny/base.fvecs -basePath /home/centos/vector_dataset/tiny/bench_data -sels 100,90,75,50,40,30,20,10,5,3,1 -efS 100,100,100,100,100,100,100,100,100,100,100 -autoEf 1 -k 100 -M 32 -efConstruction 200 -minRecall 0.950 -maxRecall 0.955 -nThreads 32 -readFromDisk 1 -storagePath /home/centos/vector_dataset/tiny/irangegraph_index.bin -useIp 1 -resultPath /home/centos/results/tiny/

./build/release/bin/orangedb_main -run benchmarkIRangeGraph -dataPath /home/centos/vector_dataset/gist/base.fvecs -queryPath /home/centos/vector_dataset/gist/bench_data/queries.fvecs -gtPath /home/centos/vector_dataset/gist/bench_data/gt.bin -maskPath /home/centos/vector_dataset/gist/bench_data/mask_30.bin -k 100 -M 32 -efSearch 120 -efConstruction 200 -nThreads 32 -readFromDisk 0 -storagePath /home/centos/orangedb/data/gist/irangegraph_index.bin -outputPath /home/centos/orangedb/data/gist/irangegraph_search.out

# navix benchmark
./build/release/bin/orangedb_main -run benchmarkNavix -dataPath /home/centos/vector_dataset/wiki/base.fvecs -basePath /home/centos/vector_dataset/wiki/neg_correlated -sels 22.93,15.02,9.96,5.10,1.01 -efS 100,100,100,100,100 -autoEf 1 -k 100 -M 32 -efConstruction 200 -minRecall 0.950 -maxRecall 0.955 -nThreads 32 -readFromDisk 1 -storagePath /home/centos/vector_dataset/wiki/navix_index.bin -useIp 1 -resultPath /home/centos/results/wiki/neg/
./build/release/bin/orangedb_main -run benchmarkNavix -dataPath /home/centos/vector_dataset/wiki/base.fvecs -basePath /home/centos/vector_dataset/wiki/pos_correlated -sels 22.93,15.02,9.96,5.10,1.01 -efS 100,100,100,100,100 -autoEf 1 -k 100 -M 32 -efConstruction 200 -minRecall 0.950 -maxRecall 0.955 -nThreads 32 -readFromDisk 1 -storagePath /home/centos/vector_dataset/wiki/navix_index.bin -useIp 1 -resultPath /home/centos/results/wiki/pos/
./build/release/bin/orangedb_main -run benchmarkNavix -dataPath /home/centos/vector_dataset/wiki/base.fvecs -basePath /home/centos/vector_dataset/wiki/uncorrelated -sels 100,90,75,50,40,30,20,10,5,3,1 -efS 100,100,100,100,100,100,100,100,100,100,100 -autoEf 1 -k 100 -M 32 -efConstruction 200 -minRecall 0.950 -maxRecall 0.955 -nThreads 32 -readFromDisk 1 -storagePath /home/centos/vector_dataset/wiki/navix_index.bin -useIp 1 -resultPath /home/centos/results/wiki/uncorrelated/
./build/release/bin/orangedb_main -run benchmarkNavix -dataPath /home/centos/vector_dataset/gist/base.fvecs -basePath /home/centos/vector_dataset/gist/bench_data -sels 100,90,75,50,40,30,20,10,5,3,1 -efS 100,90,75,50,40,30,20,10,5,3,1 -autoEf 1 -k 100 -M 32 -efConstruction 200 -minRecall 0.950 -maxRecall 0.955 -nThreads 32 -readFromDisk 1 -storagePath /home/centos/vector_dataset/gist/navix_index.bin -useIp 1 -resultPath /home/centos/results/gist/
./build/release/bin/orangedb_main -run benchmarkNavix -dataPath /home/centos/vector_dataset/tiny/base.fvecs -basePath /home/centos/vector_dataset/tiny/bench_data -sels 100,90,75,50,40,30,20,10,5,3,1 -efS 100,90,75,50,40,30,20,10,5,3,1 -autoEf 1 -k 100 -M 32 -efConstruction 200 -minRecall 0.950 -maxRecall 0.955 -nThreads 32 -readFromDisk 1 -storagePath /home/centos/vector_dataset/tiny/navix_index.bin -useIp 1 -resultPath /home/centos/results/tiny/
./build/release/bin/orangedb_main -run benchmarkNavix -dataPath /home/centos/vector_dataset/arxiv/base.fvecs -basePath /home/centos/vector_dataset/arxiv/bench_data -sels 100,90,75,50,40,30,20,10,5,3,1 -efS 100,90,75,50,40,30,20,10,5,3,1 -autoEf 1 -k 100 -M 32 -efConstruction 200 -minRecall 0.950 -maxRecall 0.955 -nThreads 32 -readFromDisk 1 -storagePath /home/centos/vector_dataset/arxiv/navix_index.bin -useIp 1 -resultPath /home/centos/results/arxiv/
./build/release/bin/orangedb_main -run benchmarkNavix -dataPath /home/centos/vector_dataset/wiki/base.fvecs -basePath /home/centos/vector_dataset/wiki/filter_bench -sels 1,2,3,6,11 -efS 100,100,100,100,100 -autoEf 1 -k 100 -M 32 -efConstruction 200 -minRecall 0.950 -maxRecall 0.955 -nThreads 32 -readFromDisk 1 -storagePath /home/centos/vector_dataset/wiki/navix_index.bin -useIp 1 -resultPath /home/centos/results/wiki/filter_bench/

#acorn10 benchmark
./build/release/bin/orangedb_main -run benchmarkAcorn -dataPath /home/centos/vector_dataset/wiki/base.fvecs -basePath /home/centos/vector_dataset/wiki/neg_correlated -sels 22.93,15.02,9.96,5.10,1.01 -efS 100,100,100,100,100 -autoEf 1 -k 100 -M 32 -gamma 10 -M_beta 64 -minRecall 0.950 -maxRecall 0.955 -nThreads 32 -readFromDisk 1 -storagePath /home/centos/vector_dataset/wiki/acorn_10_index.bin -useIp 1 -resultPath /home/centos/results/wiki/neg/
./build/release/bin/orangedb_main -run benchmarkAcorn -dataPath /home/centos/vector_dataset/wiki/base.fvecs -basePath /home/centos/vector_dataset/wiki/pos_correlated -sels 22.93,15.02,9.96,5.10,1.01 -efS 100,100,100,100,100 -autoEf 1 -k 100 -M 32 -gamma 10 -M_beta 64 -minRecall 0.950 -maxRecall 0.955 -nThreads 32 -readFromDisk 1 -storagePath /home/centos/vector_dataset/wiki/acorn_10_index.bin -useIp 1 -resultPath /home/centos/results/wiki/pos/
./build/release/bin/orangedb_main -run benchmarkAcorn -dataPath /home/centos/vector_dataset/wiki/base.fvecs -basePath /home/centos/vector_dataset/wiki/uncorrelated -sels 100,90,75,50,40,30,20,10,5,3,1 -efS 100,100,100,100,100,100,100,100,100,100,100 -autoEf 1 -k 100 -M 32 -gamma 10 -M_beta 64 -minRecall 0.950 -maxRecall 0.955 -nThreads 32 -readFromDisk 0 -storagePath /home/centos/vector_dataset/wiki/acorn_10_index.bin -useIp 1 -resultPath /home/centos/results/wiki/uncorrelated/
./build/release/bin/orangedb_main -run benchmarkAcorn -dataPath /home/centos/vector_dataset/gist/base.fvecs -basePath /home/centos/vector_dataset/gist/bench_data -sels 100,90,75,50,40,30,20,10,5,3,1 -efS 100,100,100,100,100,100,100,100,100,100,100 -autoEf 1 -k 100 -M 32 -gamma 10 -M_beta 64 -minRecall 0.950 -maxRecall 0.955 -nThreads 32 -readFromDisk 1 -storagePath /home/centos/vector_dataset/gist/acorn_10_index.bin -useIp 0 -resultPath /home/centos/results/gist/
./build/release/bin/orangedb_main -run benchmarkAcorn -dataPath /home/centos/vector_dataset/tiny/base.fvecs -basePath /home/centos/vector_dataset/tiny/bench_data -sels 100,90,75,50,40,30,20,10,5,3,1 -efS 100,100,100,100,100,100,100,100,100,100,100 -autoEf 1 -k 100 -M 32 -gamma 10 -M_beta 64 -minRecall 0.950 -maxRecall 0.955 -nThreads 32 -readFromDisk 1 -storagePath /home/centos/vector_dataset/tiny/acorn_10_index.bin -useIp 0 -resultPath /home/centos/results/tiny/
./build/release/bin/orangedb_main -run benchmarkAcorn -dataPath /home/centos/vector_dataset/arxiv/base.fvecs -basePath /home/centos/vector_dataset/arxiv/bench_data -sels 100,90,75,50,40,30,20,10,5,3,1 -efS 100,100,100,100,100,100,100,100,100,100,100-autoEf 1 -k 100 -M 32 -gamma 10 -M_beta 64 -minRecall 0.950 -maxRecall 0.955 -nThreads 32 -readFromDisk 1 -storagePath /home/centos/vector_dataset/arxiv/acorn_10_index.bin -useIp 1 -resultPath /home/centos/results/arxiv/
./build/release/bin/orangedb_main -run benchmarkAcorn -dataPath /home/centos/vector_dataset/wiki/base.fvecs -basePath /home/centos/vector_dataset/wiki/filter_bench -sels 1,2,3,6,11 -efS 100,100,100,100,100 -autoEf 1 -k 100 -M 32 -gamma 10 -M_beta 64 -minRecall 0.950 -maxRecall 0.955 -nThreads 32 -readFromDisk 1 -storagePath /home/centos/vector_dataset/wiki/acorn_10_index.bin -useIp 1 -resultPath /home/centos/results/wiki/filter_bench/

#acorn1 benchmark
./build/release/bin/orangedb_main -run benchmarkAcorn -dataPath /home/centos/vector_dataset/wiki/base.fvecs -basePath /home/centos/vector_dataset/wiki/neg_correlated -sels 22.93,15.02,9.96,5.10,1.01 -efS 100,100,100,100,100 -autoEf 1 -k 100 -M 64 -gamma 1 -M_beta 128 -minRecall 0.950 -maxRecall 0.955 -nThreads 32 -readFromDisk 1 -storagePath /home/centos/vector_dataset/wiki/acorn_1_index.bin -useIp 1 -resultPath /home/centos/results/wiki/neg/
./build/release/bin/orangedb_main -run benchmarkAcorn -dataPath /home/centos/vector_dataset/wiki/base.fvecs -basePath /home/centos/vector_dataset/wiki/pos_correlated -sels 22.93,15.02,9.96,5.10,1.01 -efS 100,100,100,100,100 -autoEf 1 -k 100 -M 64 -gamma 1 -M_beta 128 -minRecall 0.950 -maxRecall 0.955 -nThreads 32 -readFromDisk 1 -storagePath /home/centos/vector_dataset/wiki/acorn_1_index.bin -useIp 1 -resultPath /home/centos/results/wiki/pos/
./build/release/bin/orangedb_main -run benchmarkAcorn -dataPath /home/centos/vector_dataset/wiki/base.fvecs -basePath /home/centos/vector_dataset/wiki/uncorrelated -sels 100,90,75,50,40,30,20,10,5,3,1 -efS 100,100,100,100,100,100,100,100,100,100,100 -autoEf 1 -k 100 -M 64 -gamma 1 -M_beta 128 -minRecall 0.950 -maxRecall 0.955 -nThreads 32 -readFromDisk 0 -storagePath /home/centos/vector_dataset/wiki/acorn_1_index.bin -useIp 1 -resultPath /home/centos/results/wiki/uncorrelated/
./build/release/bin/orangedb_main -run benchmarkAcorn -dataPath /home/centos/vector_dataset/gist/base.fvecs -basePath /home/centos/vector_dataset/gist/bench_data -sels 100,90,75,50,40,30,20,10,5,3,1 -efS 100,100,100,100,100,100,100,100,100,100,100 -autoEf 1 -k 100 -M 64 -gamma 1 -M_beta 128 -minRecall 0.950 -maxRecall 0.955 -nThreads 32 -readFromDisk 1 -storagePath /home/centos/vector_dataset/gist/acorn_1_index.bin -useIp 0 -resultPath /home/centos/results/gist/
./build/release/bin/orangedb_main -run benchmarkAcorn -dataPath /home/centos/vector_dataset/tiny/base.fvecs -basePath /home/centos/vector_dataset/tiny/bench_data -sels 100,90,75,50,40,30,20,10,5,3,1 -efS 100,100,100,100,100,100,100,100,100,100,100 -autoEf 1 -k 100 -M 64 -gamma 1 -M_beta 128 -minRecall 0.950 -maxRecall 0.955 -nThreads 32 -readFromDisk 1 -storagePath /home/centos/vector_dataset/tiny/acorn_1_index.bin -useIp 0 -resultPath /home/centos/results/tiny/
./build/release/bin/orangedb_main -run benchmarkAcorn -dataPath /home/centos/vector_dataset/arxiv/base.fvecs -basePath /home/centos/vector_dataset/arxiv/bench_data -sels 100,90,75,50,40,30,20,10,5,3,1 -efS 100,100,100,100,100,100,100,100,100,100,100-autoEf 1 -k 100 -M 64 -gamma 1 -M_beta 128 -minRecall 0.950 -maxRecall 0.955 -nThreads 32 -readFromDisk 1 -storagePath /home/centos/vector_dataset/arxiv/acorn_1_index.bin -useIp 1 -resultPath /home/centos/results/arxiv/
./build/release/bin/orangedb_main -run benchmarkAcorn -dataPath /home/centos/vector_dataset/wiki/base.fvecs -basePath /home/centos/vector_dataset/wiki/filter_bench -sels 1,2,3,6,11 -efS 100,100,100,100,100 -autoEf 1 -k 100 -M 64 -gamma 1 -M_beta 128 -minRecall 0.950 -maxRecall 0.955 -nThreads 32 -readFromDisk 0 -storagePath /home/centos/vector_dataset/wiki/acorn_1_index.bin -useIp 1 -resultPath /home/centos/results/wiki/filter_bench/


git checkout main_backup
make build NUM_THREADS=32
mkdir -p /home/centos/results/wiki/97
mkdir -p /home/centos/results/wiki/97/neg
mkdir -p /home/centos/results/wiki/97/pos
mkdir -p /home/centos/results/wiki/97/uncorrelated
mkdir -p /home/centos/results/gist/97
mkdir -p /home/centos/results/tiny/97
mkdir -p /home/centos/results/arxiv/97
mkdir -p /home/centos/results/wiki/90/neg
mkdir -p /home/centos/results/gist/90
mkdir -p /home/centos/results/tiny/90
# navix benchmark
./build/release/bin/orangedb_main -run benchmarkNavix -dataPath /home/centos/vector_dataset/wiki/base.fvecs -basePath /home/centos/vector_dataset/wiki/neg_correlated -sels 22.93,15.02,9.96,5.10,1.01 -efS 100,100,100,100,100 -maxEfValue 3000 -autoEf 1 -k 100 -M 32 -efConstruction 200 -minRecall 0.970 -maxRecall 0.975 -nThreads 32 -readFromDisk 1 -storagePath /home/centos/vector_dataset/wiki/navix_index.bin -useIp 1 -resultPath /home/centos/results/wiki/97/neg/
./build/release/bin/orangedb_main -run benchmarkNavix -dataPath /home/centos/vector_dataset/wiki/base.fvecs -basePath /home/centos/vector_dataset/wiki/pos_correlated -sels 22.93,15.02,9.96,5.10,1.01 -efS 100,100,100,100,100 -maxEfValue 1500 -autoEf 1 -k 100 -M 32 -efConstruction 200 -minRecall 0.970 -maxRecall 0.975 -nThreads 32 -readFromDisk 1 -storagePath /home/centos/vector_dataset/wiki/navix_index.bin -useIp 1 -resultPath /home/centos/results/wiki/97/pos/
./build/release/bin/orangedb_main -run benchmarkNavix -dataPath /home/centos/vector_dataset/wiki/base.fvecs -basePath /home/centos/vector_dataset/wiki/uncorrelated -sels 100,90,75,50,40,30,20,10,5,3,1 -efS 100,100,100,100,100,100,100,100,100,100,100 -maxEfValue 1500 -autoEf 1 -k 100 -M 32 -efConstruction 200 -minRecall 0.970 -maxRecall 0.975 -nThreads 32 -readFromDisk 1 -storagePath /home/centos/vector_dataset/wiki/navix_index.bin -useIp 1 -resultPath /home/centos/results/wiki/97/uncorrelated/
./build/release/bin/orangedb_main -run benchmarkNavix -dataPath /home/centos/vector_dataset/gist/base.fvecs -basePath /home/centos/vector_dataset/gist/bench_data -sels 100,90,75,50,40,30,20,10,5,3,1 -efS 100,90,75,50,40,30,20,10,5,3,1 -maxEfValue 2000 -autoEf 1 -k 100 -M 32 -efConstruction 200 -minRecall 0.970 -maxRecall 0.975 -nThreads 32 -readFromDisk 1 -storagePath /home/centos/vector_dataset/gist/navix_index.bin -useIp 0 -resultPath /home/centos/results/gist/97/
./build/release/bin/orangedb_main -run benchmarkNavix -dataPath /home/centos/vector_dataset/tiny/base.fvecs -basePath /home/centos/vector_dataset/tiny/bench_data -sels 100,90,75,50,40,30,20,10,5,3,1 -efS 100,90,75,50,40,30,20,10,5,3,1 -maxEfValue 3000 -autoEf 1 -k 100 -M 32 -efConstruction 200 -minRecall 0.970 -maxRecall 0.975 -nThreads 32 -readFromDisk 1 -storagePath /home/centos/vector_dataset/tiny/navix_index.bin -useIp 0 -resultPath /home/centos/results/tiny/97/
./build/release/bin/orangedb_main -run benchmarkNavix -dataPath /home/centos/vector_dataset/arxiv/base.fvecs -basePath /home/centos/vector_dataset/arxiv/bench_data -sels 100,90,75,50,40,30,20,10,5,3,1 -efS 100,90,75,50,40,30,20,10,5,3,1 -maxEfValue 1500 -autoEf 1 -k 100 -M 32 -efConstruction 200 -minRecall 0.970 -maxRecall 0.975 -nThreads 32 -readFromDisk 1 -storagePath /home/centos/vector_dataset/arxiv/navix_index.bin -useIp 1 -resultPath /home/centos/results/arxiv/97/

./build/release/bin/orangedb_main -run benchmarkNavix -dataPath /home/centos/vector_dataset/wiki/base.fvecs -basePath /home/centos/vector_dataset/wiki/neg_correlated -sels 22.93,15.02,9.96,5.10,1.01 -efS 100,100,100,100,100 -maxEfValue 1500 -autoEf 1 -k 100 -M 32 -efConstruction 200 -minRecall 0.90 -maxRecall 0.905 -nThreads 32 -readFromDisk 1 -storagePath /home/centos/vector_dataset/wiki/navix_index.bin -useIp 1 -resultPath /home/centos/results/wiki/90/neg/
./build/release/bin/orangedb_main -run benchmarkNavix -dataPath /home/centos/vector_dataset/gist/base.fvecs -basePath /home/centos/vector_dataset/gist/bench_data -sels 100,90,75,50,40,30,20,10,5,3,1 -efS 100,90,75,50,40,30,20,10,5,3,1 -maxEfValue 2000 -autoEf 1 -k 100 -M 32 -efConstruction 200 -minRecall 0.970 -maxRecall 0.975 -nThreads 32 -readFromDisk 1 -storagePath /home/centos/vector_dataset/gist/navix_index.bin -useIp 0 -resultPath /home/centos/results/gist/97/
./build/release/bin/orangedb_main -run benchmarkNavix -dataPath /home/centos/vector_dataset/tiny/base.fvecs -basePath /home/centos/vector_dataset/tiny/bench_data -sels 100,90,75,50,40,30,20,10,5,3,1 -efS 100,90,75,50,40,30,20,10,5,3,1 -maxEfValue 3000 -autoEf 1 -k 100 -M 32 -efConstruction 200 -minRecall 0.970 -maxRecall 0.975 -nThreads 32 -readFromDisk 1 -storagePath /home/centos/vector_dataset/tiny/navix_index.bin -useIp 0 -resultPath /home/centos/results/tiny/97/
./build/release/bin/orangedb_main -run benchmarkNavix -dataPath /home/centos/vector_dataset/gist/base.fvecs -basePath /home/centos/vector_dataset/gist/bench_data -sels 100,90,75,50,40,30,20,10,5,3,1 -efS 100,90,75,50,40,30,20,10,5,3,1 -maxEfValue 1500 -autoEf 1 -k 100 -M 32 -efConstruction 200 -minRecall 0.90 -maxRecall 0.905 -nThreads 32 -readFromDisk 1 -storagePath /home/centos/vector_dataset/gist/navix_index.bin -useIp 0 -resultPath /home/centos/results/gist/90/
./build/release/bin/orangedb_main -run benchmarkNavix -dataPath /home/centos/vector_dataset/tiny/base.fvecs -basePath /home/centos/vector_dataset/tiny/bench_data -sels 100,90,75,50,40,30,20,10,5,3,1 -efS 100,90,75,50,40,30,20,10,5,3,1 -maxEfValue 1500 -autoEf 1 -k 100 -M 32 -efConstruction 200 -minRecall 0.90 -maxRecall 0.905 -nThreads 32 -readFromDisk 1 -storagePath /home/centos/vector_dataset/tiny/navix_index.bin -useIp 0 -resultPath /home/centos/results/tiny/90/

git checkout acorn_support
make build NUM_THREADS=32
#acorn10 benchmark
./build/release/bin/orangedb_main -run benchmarkAcorn -dataPath /home/centos/vector_dataset/wiki/base.fvecs -basePath /home/centos/vector_dataset/wiki/neg_correlated -sels 22.93,15.02,9.96,5.10,1.01 -efS 100,100,100,100,100 -autoEf 1 -k 100 -M 32 -gamma 10 -M_beta 64 -maxEfValue 6000 -minRecall 0.970 -maxRecall 0.975 -nThreads 32 -readFromDisk 1 -storagePath /home/centos/vector_dataset/wiki/acorn_10_index.bin -useIp 1 -resultPath /home/centos/results/wiki/97/neg/
./build/release/bin/orangedb_main -run benchmarkAcorn -dataPath /home/centos/vector_dataset/wiki/base.fvecs -basePath /home/centos/vector_dataset/wiki/pos_correlated -sels 22.93,15.02,9.96,5.10,1.01 -efS 100,100,100,100,100 -autoEf 1 -k 100 -M 32 -gamma 10 -M_beta 64 -maxEfValue 1500 -minRecall 0.970 -maxRecall 0.975 -nThreads 32 -readFromDisk 1 -storagePath /home/centos/vector_dataset/wiki/acorn_10_index.bin -useIp 1 -resultPath /home/centos/results/wiki/97/pos/
./build/release/bin/orangedb_main -run benchmarkAcorn -dataPath /home/centos/vector_dataset/wiki/base.fvecs -basePath /home/centos/vector_dataset/wiki/uncorrelated -sels 100,90,75,50,40,30,20,10,5,3,1 -efS 100,100,100,100,100,100,100,100,100,100,100 -autoEf 1 -k 100 -M 32 -maxEfValue 1500 -gamma 10 -M_beta 64 -minRecall 0.970 -maxRecall 0.975 -nThreads 32 -readFromDisk 0 -storagePath /home/centos/vector_dataset/wiki/acorn_10_index.bin -useIp 1 -resultPath /home/centos/results/wiki/97/uncorrelated/
./build/release/bin/orangedb_main -run benchmarkAcorn -dataPath /home/centos/vector_dataset/gist/base.fvecs -basePath /home/centos/vector_dataset/gist/bench_data -sels 100,90,75,50,40,30,20,10,5,3,1 -efS 100,100,100,100,100,100,100,100,100,100,100 -autoEf 1 -k 100 -M 32 -maxEfValue 2000 -gamma 10 -M_beta 64 -minRecall 0.970 -maxRecall 0.975 -nThreads 32 -readFromDisk 1 -storagePath /home/centos/vector_dataset/gist/acorn_10_index.bin -useIp 0 -resultPath /home/centos/results/gist/97/
./build/release/bin/orangedb_main -run benchmarkAcorn -dataPath /home/centos/vector_dataset/tiny/base.fvecs -basePath /home/centos/vector_dataset/tiny/bench_data -sels 100,90,75,50,40,30,20,10,5,3,1 -efS 100,100,100,100,100,100,100,100,100,100,100 -autoEf 1 -k 100 -M 32 -maxEfValue 5000 -gamma 10 -M_beta 64 -minRecall 0.970 -maxRecall 0.975 -nThreads 32 -readFromDisk 1 -storagePath /home/centos/vector_dataset/tiny/acorn_10_index.bin -useIp 0 -resultPath /home/centos/results/tiny/97/
./build/release/bin/orangedb_main -run benchmarkAcorn -dataPath /home/centos/vector_dataset/arxiv/base.fvecs -basePath /home/centos/vector_dataset/arxiv/bench_data -sels 100,90,75,50,40,30,20,10,5,3,1 -efS 100,100,100,100,100,100,100,100,100,100,100 -autoEf 1 -k 100 -M 32 -maxEfValue 1500 -gamma 10 -M_beta 64 -minRecall 0.970 -maxRecall 0.975 -nThreads 32 -readFromDisk 1 -storagePath /home/centos/vector_dataset/arxiv/acorn_10_index.bin -useIp 1 -resultPath /home/centos/results/arxiv/97/

./build/release/bin/orangedb_main -run benchmarkAcorn -dataPath /home/centos/vector_dataset/wiki/base.fvecs -basePath /home/centos/vector_dataset/wiki/neg_correlated -sels 22.93,15.02,9.96,5.10,1.01 -efS 100,100,100,100,100 -autoEf 1 -k 100 -M 32 -gamma 10 -M_beta 64 -maxEfValue 1500 -minRecall 0.90 -maxRecall 0.905 -nThreads 32 -readFromDisk 1 -storagePath /home/centos/vector_dataset/wiki/acorn_10_index.bin -useIp 1 -resultPath /home/centos/results/wiki/90/neg/
./build/release/bin/orangedb_main -run benchmarkAcorn -dataPath /home/centos/vector_dataset/gist/base.fvecs -basePath /home/centos/vector_dataset/gist/bench_data -sels 100,90,75,50,40,30,20,10,5,3,1 -efS 100,100,100,100,100,100,100,100,100,100,100 -autoEf 1 -k 100 -M 32 -maxEfValue 1500 -gamma 10 -M_beta 64 -minRecall 0.90 -maxRecall 0.905 -nThreads 32 -readFromDisk 1 -storagePath /home/centos/vector_dataset/gist/acorn_10_index.bin -useIp 0 -resultPath /home/centos/results/gist/90/
./build/release/bin/orangedb_main -run benchmarkAcorn -dataPath /home/centos/vector_dataset/tiny/base.fvecs -basePath /home/centos/vector_dataset/tiny/bench_data -sels 100,90,75,50,40,30,20,10,5,3,1 -efS 100,100,100,100,100,100,100,100,100,100,100 -autoEf 1 -k 100 -M 32 -maxEfValue 1500 -gamma 10 -M_beta 64 -minRecall 0.90 -maxRecall 0.905 -nThreads 32 -readFromDisk 1 -storagePath /home/centos/vector_dataset/tiny/acorn_10_index.bin -useIp 0 -resultPath /home/centos/results/tiny/90/
./build/release/bin/orangedb_main -run benchmarkAcorn -dataPath /home/centos/vector_dataset/wiki/base.fvecs -basePath /home/centos/vector_dataset/wiki/neg_correlated -sels 22.93,15.02,9.96,5.10,1.01 -efS 100,100,100,100,100 -autoEf 1 -k 100 -M 64 -gamma 1 -M_beta 128 -maxEfValue 1500 -minRecall 0.90 -maxRecall 0.905 -nThreads 32 -readFromDisk 1 -storagePath /home/centos/vector_dataset/wiki/acorn_1_index.bin -useIp 1 -resultPath /home/centos/results/wiki/90/neg/
./build/release/bin/orangedb_main -run benchmarkAcorn -dataPath /home/centos/vector_dataset/gist/base.fvecs -basePath /home/centos/vector_dataset/gist/bench_data -sels 100,90,75,50,40,30,20,10,5,3,1 -efS 100,100,100,100,100,100,100,100,100,100,100 -autoEf 1 -k 100 -M 64  -maxEfValue 1500 -gamma 1 -M_beta 128 -minRecall 0.90 -maxRecall 0.905 -nThreads 32 -readFromDisk 1 -storagePath /home/centos/vector_dataset/gist/acorn_1_index.bin -useIp 0 -resultPath /home/centos/results/gist/90/
./build/release/bin/orangedb_main -run benchmarkAcorn -dataPath /home/centos/vector_dataset/tiny/base.fvecs -basePath /home/centos/vector_dataset/tiny/bench_data -sels 100,90,75,50,40,30,20,10,5,3,1 -efS 100,100,100,100,100,100,100,100,100,100,100 -autoEf 1 -k 100 -M 64  -maxEfValue 1500 -gamma 1 -M_beta 128 -minRecall 0.90 -maxRecall 0.905 -nThreads 32 -readFromDisk 1 -storagePath /home/centos/vector_dataset/tiny/acorn_1_index.bin -useIp 0 -resultPath /home/centos/results/tiny/90/


#acorn1 benchmark
./build/release/bin/orangedb_main -run benchmarkAcorn -dataPath /home/centos/vector_dataset/wiki/base.fvecs -basePath /home/centos/vector_dataset/wiki/neg_correlated -sels 22.93,15.02,9.96,5.10,1.01 -efS 100,100,100,100,100 -autoEf 1 -k 100 -M 64 -gamma 1 -M_beta 128 -maxEfValue 6000 -minRecall 0.970 -maxRecall 0.975 -nThreads 32 -readFromDisk 1 -storagePath /home/centos/vector_dataset/wiki/acorn_1_index.bin -useIp 1 -resultPath /home/centos/results/wiki/97/neg/
./build/release/bin/orangedb_main -run benchmarkAcorn -dataPath /home/centos/vector_dataset/wiki/base.fvecs -basePath /home/centos/vector_dataset/wiki/pos_correlated -sels 22.93,15.02,9.96,5.10,1.01 -efS 100,100,100,100,100 -autoEf 1 -k 100 -M 64 -gamma 1 -M_beta 128  -maxEfValue 1500 -minRecall 0.970 -maxRecall 0.975 -nThreads 32 -readFromDisk 1 -storagePath /home/centos/vector_dataset/wiki/acorn_1_index.bin -useIp 1 -resultPath /home/centos/results/wiki/97/pos/
./build/release/bin/orangedb_main -run benchmarkAcorn -dataPath /home/centos/vector_dataset/wiki/base.fvecs -basePath /home/centos/vector_dataset/wiki/uncorrelated -sels 100,90,75,50,40,30,20,10,5,3,1 -efS 100,100,100,100,100,100,100,100,100,100,100 -autoEf 1 -k 100 -M 64  -maxEfValue 1500 -gamma 1 -M_beta 128 -minRecall 0.970 -maxRecall 0.975 -nThreads 32 -readFromDisk 1 -storagePath /home/centos/vector_dataset/wiki/acorn_1_index.bin -useIp 1 -resultPath /home/centos/results/wiki/97/uncorrelated/
./build/release/bin/orangedb_main -run benchmarkAcorn -dataPath /home/centos/vector_dataset/gist/base.fvecs -basePath /home/centos/vector_dataset/gist/bench_data -sels 100,90,75,50,40,30,20,10,5,3,1 -efS 100,100,100,100,100,100,100,100,100,100,100 -autoEf 1 -k 100 -M 64  -maxEfValue 2000 -gamma 1 -M_beta 128 -minRecall 0.970 -maxRecall 0.975 -nThreads 32 -readFromDisk 1 -storagePath /home/centos/vector_dataset/gist/acorn_1_index.bin -useIp 0 -resultPath /home/centos/results/gist/97/
./build/release/bin/orangedb_main -run benchmarkAcorn -dataPath /home/centos/vector_dataset/tiny/base.fvecs -basePath /home/centos/vector_dataset/tiny/bench_data -sels 100,90,75,50,40,30,20,10,5,3,1 -efS 100,100,100,100,100,100,100,100,100,100,100 -autoEf 1 -k 100 -M 64  -maxEfValue 5000 -gamma 1 -M_beta 128 -minRecall 0.970 -maxRecall 0.975 -nThreads 32 -readFromDisk 1 -storagePath /home/centos/vector_dataset/tiny/acorn_1_index.bin -useIp 0 -resultPath /home/centos/results/tiny/97/
./build/release/bin/orangedb_main -run benchmarkAcorn -dataPath /home/centos/vector_dataset/arxiv/base.fvecs -basePath /home/centos/vector_dataset/arxiv/bench_data -sels 100,90,75,50,40,30,20,10,5,3,1 -efS 100,100,100,100,100,100,100,100,100,100,100 -autoEf 1 -k 100 -M 64  -maxEfValue 1500 -gamma 1 -M_beta 128 -minRecall 0.970 -maxRecall 0.975 -nThreads 32 -readFromDisk 1 -storagePath /home/centos/vector_dataset/arxiv/acorn_1_index.bin -useIp 1 -resultPath /home/centos/results/arxiv/97/

./apps/build_disk_index --data_type float --dist_fn cosine --data_path ~/vector_dataset/wiki/base.fbin --index_path_prefix ~/vector_dataset/wiki/new_diskann_index_R64_L200_B15_A1.2 -R 64 -L 200 -B 15 -M 100 -T 32
./apps/search_disk_index  --data_type float --dist_fn cosine --index_path_prefix ~/vector_dataset/wiki/diskann_index_R64_L200_B3_A1.2 --query_file ~/vector_dataset/wiki/query.fbin  --gt_file ~/vector_dataset/wiki/gt.bin -K 100 -L 100 --result_path ~/vector_dataset/wiki/res --num_nodes_to_cache 10000
./apps/search_disk_index  --data_type float --dist_fn cosine --index_path_prefix ~/vector_dataset/wiki/diskann_index_R64_L200_B15_A1.2 --query_file ~/vector_dataset/wiki/query.fbin  --gt_file ~/vector_dataset/wiki/gt.bin -K 100 -L 100 --result_path ~/vector_dataset/wiki/res --num_nodes_to_cache 10000
./apps/utils/compute_groundtruth  --data_type float --dist_fn cosine --base_file ~/vector_dataset/wiki/base.fbin --query_file ~/vector_dataset/wiki/query.fbin --gt_file  ~/vector_dataset/wiki/gt.bin --K 100

./apps/build_disk_index --data_type float --dist_fn l2 --data_path ~/vector_dataset/gist/base.fbin --index_path_prefix ~/vector_dataset/gist/diskann_index_R64_L200_B3_A1.2 -R 64 -L 200 -B 0.384 -M 5 -T 32
./apps/utils/compute_groundtruth  --data_type float --dist_fn l2 --base_file ~/vector_dataset/gist/base.fbin --query_file ~/vector_dataset/gist/query.fbin --gt_file  ~/vector_dataset/wiki/gt.bin --K 100
 ./apps/search_disk_index  --data_type float --dist_fn l2 --index_path_prefix ~/vector_dataset/gist/diskann_index_R64_L200_B3_A1.2 --query_file ~/vector_dataset/gist/query.fbin  --gt_file ~/vector_dataset/gist/gt.bin -K 10 -L 10 20 30 40 50 100 --result_path ~/vector_dataset/gist/ --num_nodes_to_cache 10000

./apps/utils/fvecs_to_bin float ~/vector_dataset/gist/base.fvecs ~/vector_dataset/gist/base.fbin
./apps/utils/fvecs_to_bin float ~/vector_dataset/gist/bench_data/queries.fvecs ~/vector_dataset/gist/query.fbin
./apps/utils/compute_groundtruth  --data_type float --dist_fn l2 --base_file ~/vector_dataset/gist/base.fbin --query_file ~/vector_dataset/gist/query.fbin --gt_file ~/vector_dataset/gist/gt.bin --K 100

mkdir -p ~/DiskANN/build/data && cd ~/DiskANN/build/data
wget ftp://ftp.irisa.fr/local/texmex/corpus/sift.tar.gz
tar -xf sift.tar.gz
cd ..
./apps/utils/fvecs_to_bin float data/sift/sift_learn.fvecs data/sift/sift_learn.fbin
./apps/utils/fvecs_to_bin float data/sift/sift_query.fvecs data/sift/sift_query.fbin
./apps/build_disk_index --data_type float --dist_fn l2 --data_path data/sift/sift_learn.fbin --index_path_prefix data/sift/disk_index_sift_learn_R32_L50_A1.2 -R 32 -L 50 -B 0.1 -M 1

## Filtered Benchmark
./apps/utils/generate_synthetic_labels --num_labels 20 --num_points 15435516 --output_file ~/vector_dataset/wiki/labels_20.txt --distribution_type zipf
./apps/utils/compute_groundtruth_for_filters --data_type float --dist_fn cosine --base_file ~/vector_dataset/wiki/base.fbin --query_file ~/vector_dataset/wiki/query.fbin --gt_file ~/vector_dataset/wiki/filtered_gt_20.bin --K 100 --label_file ~/vector_dataset/wiki/labels_20.txt --filter_label 10 --universal_label 0
./apps/build_disk_index --data_type float --dist_fn cosine --data_path ~/vector_dataset/wiki/base.fbin --index_path_prefix ~/vector_dataset/wiki/diskann_new_filtered_index_R64_L200_B15_A1.2 -R 64 --FilteredLbuild 200 -B 15 -M 100 -T 32 --label_file ~/vector_dataset/wiki/labels.txt --universal_label 0 -F 0

./apps/utils/compute_groundtruth_for_filters --data_type float --dist_fn cosine --base_file ~/vector_dataset/wiki/base.fbin --query_file ~/vector_dataset/wiki/query.fbin --gt_file ~/vector_dataset/wiki/filtered_1_gt.bin --K 100 --label_file ~/vector_dataset/wiki/labels.txt --filter_label 1 --universal_label 0
./apps/utils/compute_groundtruth_for_filters --data_type float --dist_fn cosine --base_file ~/vector_dataset/wiki/base.fbin --query_file ~/vector_dataset/wiki/query.fbin --gt_file ~/vector_dataset/wiki/filtered_2_gt.bin --K 100 --label_file ~/vector_dataset/wiki/labels.txt --filter_label 2 --universal_label 0
./apps/utils/compute_groundtruth_for_filters --data_type float --dist_fn cosine --base_file ~/vector_dataset/wiki/base.fbin --query_file ~/vector_dataset/wiki/query.fbin --gt_file ~/vector_dataset/wiki/filtered_3_gt.bin --K 100 --label_file ~/vector_dataset/wiki/labels.txt --filter_label 3 --universal_label 0
./apps/utils/compute_groundtruth_for_filters --data_type float --dist_fn cosine --base_file ~/vector_dataset/wiki/base.fbin --query_file ~/vector_dataset/wiki/query.fbin --gt_file ~/vector_dataset/wiki/filtered_6_gt.bin --K 100 --label_file ~/vector_dataset/wiki/labels.txt --filter_label 6 --universal_label 0
./apps/utils/compute_groundtruth_for_filters --data_type float --dist_fn cosine --base_file ~/vector_dataset/wiki/base.fbin --query_file ~/vector_dataset/wiki/query.fbin --gt_file ~/vector_dataset/wiki/filtered_11_gt.bin --K 100 --label_file ~/vector_dataset/wiki/labels.txt --filter_label 11 --universal_label 0

./apps/search_disk_index --data_type float --dist_fn cosine --index_path_prefix ~/vector_dataset/wiki/diskann_filtered_index_R64_L200_B15_A1.2 --result_path ~/vector_dataset/wiki/res --query_file ~/vector_dataset/wiki/query.fbin --gt_file ~/vector_dataset/wiki/filtered_1_gt.bin -K 100 -L 300 --filter_label 1 -W 1 -T 1
./apps/search_disk_index --data_type float --dist_fn cosine --index_path_prefix ~/vector_dataset/wiki/diskann_filtered_index_R64_L200_B15_A1.2 --result_path ~/vector_dataset/wiki/res --query_file ~/vector_dataset/wiki/query.fbin --gt_file ~/vector_dataset/wiki/filtered_2_gt.bin -K 100 -L 600 --filter_label 2 -W 1 -T 1
./apps/search_disk_index --data_type float --dist_fn cosine --index_path_prefix ~/vector_dataset/wiki/diskann_filtered_index_R64_L200_B15_A1.2 --result_path ~/vector_dataset/wiki/res --query_file ~/vector_dataset/wiki/query.fbin --gt_file ~/vector_dataset/wiki/filtered_3_gt.bin -K 100 -L 900 --filter_label 3 -W 1 -T 1
./apps/search_disk_index --data_type float --dist_fn cosine --index_path_prefix ~/vector_dataset/wiki/diskann_filtered_index_R64_L200_B15_A1.2 --result_path ~/vector_dataset/wiki/res --query_file ~/vector_dataset/wiki/query.fbin --gt_file ~/vector_dataset/wiki/filtered_6_gt.bin -K 100 -L 2200 --filter_label 6 -W 1 -T 1
./apps/search_disk_index --data_type float --dist_fn cosine --index_path_prefix ~/vector_dataset/wiki/diskann_filtered_index_R64_L200_B15_A1.2 --result_path ~/vector_dataset/wiki/res --query_file ~/vector_dataset/wiki/query.fbin --gt_file ~/vector_dataset/wiki/filtered_11_gt.bin -K 100 -L 8000 --filter_label 11 -W 1 -T 1

./apps/search_memory_index --data_type float --dist_fn cosine --index_path_prefix ~/vector_dataset/wiki/diskann_inmem_filtered_index_R64_L200_B15_A1.2 --result_path ~/vector_dataset/wiki/res --query_file ~/vector_dataset/wiki/query.fbin --gt_file ~/vector_dataset/wiki/filtered_1_gt.bin -K 100 -L 350 --filter_label 1 -T 1
./apps/search_memory_index --data_type float --dist_fn cosine --index_path_prefix ~/vector_dataset/wiki/diskann_inmem_filtered_index_R64_L200_B15_A1.2 --result_path ~/vector_dataset/wiki/res --query_file ~/vector_dataset/wiki/query.fbin --gt_file ~/vector_dataset/wiki/filtered_2_gt.bin -K 100 -L 600 --filter_label 2 -T 1
./apps/search_memory_index --data_type float --dist_fn cosine --index_path_prefix ~/vector_dataset/wiki/diskann_inmem_filtered_index_R64_L200_B15_A1.2 --result_path ~/vector_dataset/wiki/res --query_file ~/vector_dataset/wiki/query.fbin --gt_file ~/vector_dataset/wiki/filtered_3_gt.bin -K 100 -L 900 --filter_label 3 -T 1
./apps/search_memory_index --data_type float --dist_fn cosine --index_path_prefix ~/vector_dataset/wiki/diskann_inmem_filtered_index_R64_L200_B15_A1.2 --result_path ~/vector_dataset/wiki/res --query_file ~/vector_dataset/wiki/query.fbin --gt_file ~/vector_dataset/wiki/filtered_6_gt.bin -K 100 -L 2200 --filter_label 6 -T 1
./apps/search_memory_index --data_type float --dist_fn cosine --index_path_prefix ~/vector_dataset/wiki/diskann_inmem_filtered_index_R64_L200_B15_A1.2 --result_path ~/vector_dataset/wiki/res --query_file ~/vector_dataset/wiki/query.fbin --gt_file ~/vector_dataset/wiki/filtered_11_gt.bin -K 100 -L 8000 --filter_label 11 -T 1

./build/release/bin/orangedb_main -run generateFilterGT -dataPath /home/centos/vector_dataset/wiki/base.fvecs -basePath /home/centos/vector_dataset/wiki/filter_bench -sels 1,2,3,6,11 -k 100
./apps/utils/compute_groundtruth_for_filters --data_type float --dist_fn cosine --base_file ~/vector_dataset/wiki/base.fbin --query_file ~/vector_dataset/wiki/query.fbin --gt_file ~/vector_dataset/wiki/filtered_20_11_gt.bin --K 100 --label_file ~/vector_dataset/wiki/labels_20.txt --filter_label 11 --universal_label 0
./apps/search_disk_index --data_type float --dist_fn cosine --index_path_prefix ~/vector_dataset/wiki/diskann_filtered_index_Label20_R64_L200_B15_A1.2 --result_path ~/vector_dataset/wiki/res --query_file ~/vector_dataset/wiki/query.fbin --gt_file ~/vector_dataset/wiki/filtered_20_11_gt.bin -K 100 -L 900 --filter_label 11 -W 1 -T 1

# inmem filtered index
./apps/build_memory_index --data_type float --dist_fn cosine --data_path ~/vector_dataset/wiki/base.fbin --index_path_prefix ~/vector_dataset/wiki/diskann_inmem_filtered_index_R64_L200_B15_A1.2 -R 64 --FilteredLbuild 200 -T 32 --label_file ~/vector_dataset/wiki/labels.txt --universal_label 0
# inmem stiched index
COPY embeddings FROM (LOAD FROM "/home/centos/vector_dataset/wiki/embeddings_with_filters.parquet" RETURN cast(id as INT64) as id, cast(has_label_1 as BOOLEAN) as has_label_1, cast(has_label_2 as BOOLEAN) as has_label_2, cast(has_label_3 as BOOLEAN) as has_label_3, cast(has_label_6 as BOOLEAN) as has_label_6, cast(has_label_11 as BOOLEAN) as has_label_11, cast(embedding as FLOAT[1024]) as embedding);


./build/release/bin/orangedb_main -run benchmarkFaissClustering -baseVectorPath /home/centos/vector_dataset/wiki/base.fvecs -queryVectorPath /home/centos/vector_dataset/wiki/uncorrelated/queries.fvecs -groundTruthPath /home/centos/vector_dataset/wiki/uncorrelated/gt_100.bin -k 100 -numVectors 100000000 -sampleSize 3000000 -nIter 10 -nThreads 64 -numQueries 50 -clusterSize 5000 -nProbes 10 -readFromDisk 1 -storagePath /home/centos/vector_dataset/wiki/faiss_ivf_flat_index.bin
